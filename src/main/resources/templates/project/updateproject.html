<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head th:replace="fragments/head.html(currentPage='Edit Project', customCSS='project.css')"></head> <!-- custom title + bonus css-->
<header th:replace="fragments/header.html(currentPage='edit project')"></header>
<body>
<main>

    <section class="project-container">

        <section class="info">

            <section class="title">
                <h1>project name</h1>
                <p th:text="${project.getTitle}"></p>
            </section>
            <section class="owner">
                <h1>Project owner</h1>
                <p>Anton Bjoern Lund</p>
            </section>

            <section class="status">
                <h1>project status</h1>
                <form action="/change_project_status" method="post">
                    <button type="submit" name="projectTitle" th:value="${project.getTitle}">
                        <p th:text="${project.isFinished()}"></p></button>
                </form>

                <p th:if="${project.isFinished() == true}">[project open]🟢</p>
                <p th:if="${project.isFinished() == false}">[project closed]🔴</p>
            </section>

        </section>

        <section class="description">
            <h1>Description</h1>
            <p th:text="${project.getDescription}"></p>
        </section>

        <section class="deadline">
            <h1>Project dates</h1>
            <p th:text="${project.getStartDateAsString + ' ➝ ' + project.getDeadlineAsString}"></p>
            <hr>
            <p th:text="${'Days remaining: ' + project.countdown}"></p>
            <p th:if="${time <= 7 and time >= 0}" th:text="${'Working hours per day: ' + time}"></p>
            <p th:if="${time > 7}" id="time-issue" th:text="|Working hours per day: ${time} can't be done in time|"></p>
            <p th:if="${time < 0}" id="time-deadline">Deadline passed</p>
        </section>

        <section class="users">
            <h1>Assigned users</h1>
            <ul th:each="users : ${users}">
                <li th:text="${users.getFirstname + ' ' + users.getLastname}"></li>
                <li th:text="${users.getRole}"></li>
            </ul>
        </section>

        <section class="tasks">
            <h1>tasks for project</h1>

            <form th:action="@{/view/{project}/createtask (project=${project.getTitle})}" method="get">
                <button type="submit">Create task</button>
            </form>

            <!-- old -->
            <table>
                <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Desc.</th>
                    <th>Status</th>
                </tr>


                <tr th:each="task : ${tasks}">

                    <td>
                        <a th:href="@{/view/{projectTitle}/{taskTitle} (projectTitle=${project.getTitle}, taskTitle=${task.getTitle})}" th:text="${task.getID}">
                        </a>
                    </td>


                    <td th:text="${task.getTitle}"></td>
                    <td th:text="${task.getDescription}"></td>
                    <td>
                        <form action="/change_finished_status" method="post">
                            <input type="hidden" name="projectTitle" th:value="${project.getTitle}">
                            <button type="submit" name="taskID" th:value="${task.getID}">
                                <p th:text="${task.printIsFinished()}"></p></button>
                        </form>
                    </td>
                </tr>

            </table>

             <!-- new -->
            <ul th:each="task : ${tasks}">
            <section class="grid-container">


                <a th:href="@{/view/{projectTitle}/{taskTitle} (projectTitle=${project.getTitle}, taskTitle=${task.getTitle})}">
                    <section class="title">
                        <section class="title">
                            <p th:text="${task.getTitle}"></p>
                        </section>


                    </section>
                </a>
                    <section class="size">
                     <p>52</p>
                    </section>

                    <section class="price">

                            <p th:text="${task.getPrice}"></p>

                    </section>

                    <section class="status">
                        <form action="/change_finished_status" method="post">
                            <input type="hidden" name="projectTitle" th:value="${project.getTitle}">
                            <button type="submit" name="taskID" th:value="${task.getID}">
                                <p th:text="${task.printIsFinished()}"></p></button>
                        </form>


                    </section>


            </section>
            </ul>


        </section>

    </section>

    <button type="button">⚠ Delete project</button>


</main>
<footer th:replace="fragments/footer.html"></footer>
</body>
</html>